<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <title th:text="'Invoice ' + ${invoiceNo}">Invoice</title>
  <style>
    * { box-sizing: border-box; }
    body { font-family: Arial, sans-serif; color:#222; margin: 24px; }
    .header { display:flex; justify-content:space-between; align-items:flex-start; }
    .brand { font-size: 22px; font-weight: bold; }
    .meta { text-align:right; }
    .section { margin-top: 18px; }
    table { width:100%; border-collapse: collapse; margin-top: 8px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background: #f6f6f6; }
    .total { font-weight:bold; }
    .muted { color:#555; font-size: 12px; }
    .grid { display:grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    img.qr { margin-top: 8px; width: 120px; height: 120px; }
  </style>
</head>
<body>
<div class="header">
  <div>
    <div class="brand" th:text="${dealer.name}">Dealer Name</div>
    <div class="muted" th:text="${dealer.address}">Dealer Address</div>
    <div class="muted" th:text="${dealer.phone}">Dealer Phone</div>
  </div>
  <div class="meta">
    <div><b>Invoice #</b> <span th:text="${invoiceNo}"></span></div>
    <div><b>Date</b> <span th:text="${timestamp}"></span></div>
    <div><b>Txn ID</b> <span th:text="${transactionId}"></span></div>
  </div>
</div>

<div class="section grid">
  <div>
    <h3>Customer</h3>
    <div th:text="${customerName}">John Doe</div>
  </div>
  <div>
    <h3>Vehicle</h3>
    <div>
      <span th:text="${vehicle.make}">Make</span>
      <span th:text="${vehicle.model}">Model</span>
      (<span th:text="${vehicle.year}">Year</span>)
    </div>
    <div><b>ID:</b> <span th:text="${vehicle.id}"></span></div>
  </div>
</div>

<div class="section">
  <h3>Summary</h3>
  <table>
    <thead>
    <tr>
      <th>Description</th>
      <th>Amount (â‚¹)</th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td>Base Price</td>
      <td th:text="${#numbers.formatDecimal(base, 0, 'COMMA', 2, 'POINT')}">0.00</td>
    </tr>
    <tr>
      <td>Tax (10%)</td>
      <td th:text="${#numbers.formatDecimal(tax, 0, 'COMMA', 2, 'POINT')}">0.00</td>
    </tr>
    <tr class="total">
      <td>Total</td>
      <td th:text="${#numbers.formatDecimal(total, 0, 'COMMA', 2, 'POINT')}">0.00</td>
    </tr>
    </tbody>
  </table>
</div>

<div class="section">
  <h3>QR Code (Transaction)</h3>
  <img class="qr" th:src="'data:image/png;base64,' + ${qrBase64}" alt="QR"/>
  <div class="muted">Scan to view transaction details.</div>
</div>

<div class="section muted">
  <p>Generated by Invoice Service. Prices inclusive of taxes where applicable.</p>
</div>
</body>
</html>
